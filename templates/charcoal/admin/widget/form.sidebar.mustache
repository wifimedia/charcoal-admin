 {{!--

--}}
<aside class="c-aside o-flex_aside" id="{{widgetId}}">
    <div class="o-container -top -right">
        <div class="c-panel -fixed">
            <header class="c-panel_header">{{title}}</header>

            <div class="c-panel_main">
                {{#subtitle}}
                <p>{{.}}</p>
                {{/subtitle}}

                {{#showLanguageSwitch}}
                <div class="c-toggle_lang{{#isPlurilingual}} -dropdown{{/isPlurilingual}} js-lang-switch" role="group" aria-label="{{#_t}}Language switcher{{/_t}}">
                    {{#isBilingual}}
                    <div class="btn-group btn-group-justified">
                        {{#languages}}
                        <a href="#" role="button" data-lang-switch="{{ident}}" class="btn{{#current}} btn-info{{/current}}{{^current}} btn-default{{/current}}">
                            <span class="btn-label">{{name}}</span>
                            <small class="badge"></small>
                        </a>
                        {{/languages}}
                    </div>
                    {{/isBilingual}}
                    {{#isPlurilingual}}
                    {{#currentLanguage}}
                    <button type="button" class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="dropdown-label">
                            <span class="btn-label">{{name}}</span>
                            <small class="badge"></small>
                        </span>
                        <span class="caret"></span>
                    {{/currentLanguage}}
                    </button>
                    <ul class="dropdown-menu">
                    {{#languages}}
                        <li{{#current}} class="active"{{/current}}>
                            <a href="#" role="button" data-lang-switch="{{ident}}">
                                <span class="btn-label">{{name}}</span>
                                <small class="badge"></small>
                            </a>
                        </li>
                    {{/languages}}
                    </ul>
                    {{/isPlurilingual}}
                </div>
                {{/showLanguageSwitch}}

                {{#hasSidebarProperties}}
                <ul class="c-panel_table form-group">
                {{#formProperties}}
                    <li class="c-panel_table_row">
                        <p class="c-panel_table_header"><strong>{{prop.label}}</strong></p>
                        <p class="c-panel_table_data">{{displayVal}}</p>
                    </li>
                {{/formProperties}}
                </ul>
                {{/hasSidebarProperties}}

                {{#actions}}
                    {{#active}}
                    <div class="form-group">
                        <a href="{{baseUrl}}{{url}}" class="btn btn-{{button_type}} btn-lg btn-block">{{label}}</a>
                    </div>
                    {{/active}}
                {{/actions}}

                <div class="form-group">
                    <button type="submit" class="btn btn-info btn-lg btn-block">
                        <span class="glyphicon glyphicon-refresh u-spin hidden"></span>
                        <span class="btn-label">{{# _t }}Sauvegarder{{/ _t }}</span>
                    </button>
                </div>
            </div>

            {{# showFooter }}
            <footer class="c-panel_footer">
            {{!--
            @todo Only show the "delete" button if there's an object's ID.
            --}}
                {{#isObjDeletable}}
                <div class="c-panel_footer_item -red">
                    <span role="button" class="js-obj-delete">
                       <span class="fa fa-trash-o"></span>
                       <span class="btn-label">{{# _t }}Effacer{{/ _t }}</span>
                    </span>
                </div>
                {{/isObjDeletable}}
                {{#isObjResettable}}
                <div class="c-panel_footer_item -blue">
                    <span role="button" class="js-reset-form">
                        <span class="fa fa-refresh"></span>
                        <span class="btn-label">{{# _t }}RÃ©initialiser{{/ _t }}</span>
                    </span>
                </div>
                {{/isObjResettable}}
            </footer>
            {{/ showFooter }}
        </div>
    </div>
</aside>

{{!--
[[#addJs]]
<script>
Charcoal.Admin.manager().add_widget({
    id: '[[widgetId]]',
    type: 'charcoal/admin/widget/form.sidebar',
    data: {
        obj_type: '[[objType]]',
        collection_ident: '[[collectionIdent]]'
    }
});
</script>
[[/addJs]]
--}}
